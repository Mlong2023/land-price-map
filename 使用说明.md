# 地图应用使用说明

## 问题解决

如果 `final_test.html` 没有反应，请尝试以下解决方案：

### 方案1：使用修复版本 ✅
打开 `final_test_fixed.html` - 这个版本将所有CSS样式内联，避免了外部文件加载问题。

### 方案2：使用简化测试版本 ✅
打开 `simple_test.html` - 这是一个简化的测试页面，可以逐步测试各个功能。

### 方案3：使用诊断页面 🔍
打开 `diagnose.html` - 这个页面可以帮助诊断系统问题。

## 推荐使用顺序

1. **首先尝试**: `final_test_fixed.html`
2. **如果有问题**: `simple_test.html`
3. **需要诊断**: `diagnose.html`

## 使用步骤

### 使用 final_test_fixed.html

1. **打开页面**: 在浏览器中访问 `http://localhost:8000/final_test_fixed.html`

2. **查看状态面板**: 左上角的状态面板会显示：
   - 地图状态
   - 数据加载状态
   - 图层创建状态
   - 图层统计信息

3. **等待初始化**: 页面会自动初始化，状态会从"初始化中"变为"✅ 已就绪"

4. **使用功能**:
   - 点击"图层面板"按钮显示图层控制面板
   - 点击"适应视野"调整地图视野
   - 点击"系统信息"查看详细状态
   - 点击"测试图层"测试所有图层

5. **图层操作**:
   - 点击右侧的三条横线按钮打开图层面板
   - 勾选/取消勾选图层复选框来控制显示
   - 点击地图上的地块查看详细信息

### 使用 simple_test.html

1. **打开页面**: 访问 `http://localhost:8000/simple_test.html`

2. **按步骤操作**:
   - 点击"初始化地图"按钮
   - 点击"加载数据"按钮
   - 点击"测试图层"按钮

3. **查看结果**: 操作日志会显示每一步的执行结果

## 预期效果

成功加载后应该看到：

- ✅ **地图显示**: 登封市区域的卫星地图
- ✅ **图层数据**: 
  - 定级范围: 1个要素
  - 商服用地: 15个要素（红色）
  - 住宅用地: 16个要素（绿色）
  - 工业用地: 6个要素（橙色）
  - 公共用地: 9个要素（蓝色，默认隐藏）
- ✅ **交互功能**: 点击地块显示详细信息
- ✅ **图层控制**: 可以切换图层显示/隐藏

## 故障排除

### 如果页面空白或没有反应：

1. **检查控制台错误**:
   - 按F12打开开发者工具
   - 查看Console标签页的错误信息

2. **检查网络请求**:
   - 在开发者工具的Network标签页查看是否有失败的请求
   - 特别注意CSS、JS和GeoJSON文件的加载状态

3. **检查服务器**:
   ```bash
   # 确保服务器正在运行
   python -m http.server 8000
   ```

4. **尝试不同浏览器**:
   - Chrome (推荐)
   - Firefox
   - Edge

### 常见问题解决：

**问题1**: 地图不显示
- **解决**: 检查高德地图API是否加载成功，网络是否正常

**问题2**: 数据不加载
- **解决**: 检查GeoJSON文件是否存在，路径是否正确

**问题3**: 图层不显示
- **解决**: 检查图层管理器是否正确初始化

**问题4**: 样式错误
- **解决**: 使用 `final_test_fixed.html` 版本

## 技术支持

如果仍有问题，请：

1. 使用 `diagnose.html` 进行系统诊断
2. 查看浏览器控制台的详细错误信息
3. 检查所有文件是否完整存在

## 文件说明

- `final_test_fixed.html` - 主要测试页面（推荐）
- `simple_test.html` - 简化测试页面
- `diagnose.html` - 诊断页面
- `data/GeoJSON/` - 地图数据文件
- `js/` - JavaScript功能模块

所有页面都包含详细的日志输出，可以帮助定位问题。